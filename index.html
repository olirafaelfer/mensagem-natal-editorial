<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b1020" />
  <title>MissÃ£o Editorial de Natal ğŸ„</title>

  <link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%20100%20100%27%3E%3Ctext%20y%3D%270.9em%27%20font-size%3D%2790%27%3E%F0%9F%8E%84%3C/text%3E%3C/svg%3E">

  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/admin.css" />
  <!-- âœ… novo: estilos da Ã¡rea de login/cadastro -->
  <link rel="stylesheet" href="css/auth.css" />
</head>

<body>
  <!-- fundos (fixos via CSS) -->
  <canvas id="snow" aria-hidden="true"></canvas>

  <!-- âœ… nÃ£o deixar hidden fixo aqui (o JS controla o efeito) -->
  <div id="reindeerLayer" class="reindeer-layer" aria-hidden="true"></div>

  <main class="app">
    <!-- wrapper central para layout consistente -->
    <div class="container">

      <header class="topbar">
        <div class="brand">
          <span class="badge">ğŸ… MissÃ£o do Editor-Chefe</span>
          <h1 id="headerTitle">RevisÃ£o da Mensagem de Natal</h1>
        </div>

        <div class="top-actions">
          <!-- âœ… novo: login/cadastro de usuÃ¡rios -->
          <button class="icon-btn" id="loginBtn" title="Entrar / Conta" type="button">ğŸ‘¤</button>

          <button class="icon-btn" id="customizeBtn" title="Personalizar" type="button">âš™ï¸</button>
          <button class="icon-btn" id="rankingBtn" title="Ranking" type="button">ğŸ†</button>
          <button class="icon-btn admin-btn" id="adminBtn" title="Admin" type="button">ğŸ”’</button>
        </div>
      </header>

      <!-- âœ… novo: Tela de Login/Cadastro (fica dentro do fluxo do app) -->
      <section class="card hidden" id="screenAuth">
        <div class="card-inner">
          <div class="center" style="margin-bottom:12px">
            <h2 class="h2" style="margin-bottom:6px">Acesso Ã  plataforma</h2>
            <p class="muted" style="margin:0">
              Para entrar no ranking e ver seu histÃ³rico, faÃ§a login ou crie sua conta.
              Se preferir, vocÃª ainda pode jogar sem cadastro (sem contabilizar no ranking).
            </p>
          </div>

          <div class="auth-tabs">
            <button class="auth-tab active" id="tabLogin" type="button">Entrar</button>
            <button class="auth-tab" id="tabRegister" type="button">Criar conta</button>
          </div>

          <!-- LOGIN -->
          <div id="authLogin">
            <div class="form-grid" style="margin-top:12px">
              <label class="field" style="grid-column: 1 / -1;">
                <span>E-mail</span>
                <input class="input" id="loginEmail" type="email" placeholder="seu@email.com" autocomplete="email" />
              </label>

              <label class="field" style="grid-column: 1 / -1;">
                <span>Senha</span>
                <input class="input" id="loginPassword" type="password" placeholder="Sua senha" autocomplete="current-password" />
              </label>
            </div>

            <div class="actions" style="justify-content:flex-start; margin-top:12px">
              <button class="btn" id="loginSubmit" type="button">Entrar</button>
              <button class="btn ghost" id="forgotPassword" type="button">Esqueci a senha</button>
              <button class="btn ghost" id="continueNoLogin" type="button">Continuar sem login</button>
            </div>
          </div>

          <!-- CADASTRO -->
          <div id="authRegister" class="hidden">
            <div class="form-grid" style="margin-top:12px">
              <label class="field">
                <span>Nome</span>
                <input class="input" id="regName" type="text" placeholder="Seu nome" autocomplete="name" maxlength="60" />
              </label>

              <label class="field">
                <span>Setor</span>
                <select class="input" id="regSector"></select>
              </label>

              <label class="field" style="grid-column: 1 / -1;">
                <span>E-mail</span>
                <input class="input" id="regEmail" type="email" placeholder="seu@email.com" autocomplete="email" />
              </label>

              <label class="field" style="grid-column: 1 / -1;">
                <span>Senha</span>
                <input class="input" id="regPassword" type="password" placeholder="Crie uma senha" autocomplete="new-password" />
              </label>
            </div>

            <div class="actions" style="justify-content:flex-start; margin-top:12px">
              <button class="btn" id="registerSubmit" type="button">Criar conta</button>
              <button class="btn ghost" id="backToLogin" type="button">Voltar</button>
            </div>

            <div class="hintbar" style="margin-top:12px">
              âœ… Depois do cadastro, vocÃª poderÃ¡ acompanhar seus resultados e participar do ranking.
            </div>
          </div>

          <div id="authStatus" class="hintbar hidden" style="margin-top:12px"></div>
        </div>
      </section>

      <!-- Loading fake -->
      <section class="card" id="screenLoading">
        <div class="card-inner center">
          <img class="logo-pulse" src="img/logo-natal.png" alt="Logo natalina" />
          <h2 class="loading-title">Preparando sua missÃ£oâ€¦</h2>
          <p class="muted">Carregando o conteÃºdo especial de Natal â„ï¸</p>
        </div>
      </section>

      <!-- Form -->
      <section class="card hidden" id="screenForm">
        <div class="card-inner">
          <h2 class="h2">Antes de comeÃ§ar</h2>
          <p class="muted">
            Informe seu nome e selecione seu setor para registrar o desempenho <strong>por setor</strong>.
          </p>

          <div class="form-grid">
            <label class="field">
              <span>Nome</span>
              <input class="input" id="userName" placeholder="Ex.: Rafael" maxlength="60" />
            </label>

            <label class="field">
              <span>Setor</span>
              <select class="input" id="userSector"></select>
            </label>
          </div>

          <div class="toggle-row" style="margin-top:10px">
            <div class="toggle-text">
              <b>Participar do ranking</b>
              <small class="muted">Se desligado, seu resultado nÃ£o entra nas estatÃ­sticas.</small>
            </div>

            <label class="switch" aria-label="Participar do ranking">
              <input type="checkbox" id="optRanking" checked>
              <span class="slider"></span>
            </label>
          </div>

          <div class="lgpd-box">
            <p class="lgpd-title">ObservaÃ§Ã£o</p>
            <p class="muted" style="margin:6px 0 0">
              Os erros e correÃ§Ãµes serÃ£o apresentados ao final da atividade. <br>
              NÃ£o se preocupe com seu desempenho: esta atividade busca interatividade e curiosidades sobre o trabalho editorial!
            </p>
          </div>

          <div class="lgpd-box">
            <p class="lgpd-title">LGPD</p>
            <p class="muted" style="margin:6px 0 0">
              Seguimos as diretrizes da LGPD e nÃ£o faremos compartilhamento de informaÃ§Ãµes pessoais.
              O ranking exibe apenas resultados <strong>agregados por setor</strong>.
              <button type="button" class="linklike" id="lgpdMoreBtn">Saiba mais</button>
            </p>
          </div>

          <div class="actions">
            <button class="btn" id="startBtn" type="button">Iniciar missÃ£o</button>
          </div>
        </div>
      </section>

      <!-- Game -->
      <section class="card hidden" id="screenGame">
        <div class="card-inner">
          <div class="status-row">
            <div class="pill">NÃ­vel: <strong id="levelLabel">FÃ¡cil</strong></div>
            <div class="pill">CorreÃ§Ãµes a serem feitas: <strong id="remainingCount">0</strong>/<span id="totalFix">0</span></div>
            <div class="pill pill-danger">Erros: <strong id="wrongCount">0</strong></div>
            <div class="pill">Pontos: <strong id="scoreCount">0</strong></div>
          </div>

          <p class="lead" id="instruction"></p>
          <article class="message" id="messageArea" aria-label="Mensagem para revisar"></article>

          <div class="hintbar">
            ğŸ’¡ Dica: vocÃª pode <button class="linklike" id="openCustomizeInline" type="button">personalizar a pÃ¡gina</button> a qualquer momento.
          </div>

          <div class="actions">
            <button id="hintBtn" class="btn ghost" type="button">Me dÃª uma cola!</button>
            <button id="autoFixBtn" class="btn ghost" type="button">Corrigir automaticamente</button>
            <button id="nextLevelBtn" class="btn btn-disabled" aria-disabled="true" type="button">PrÃ³ximo nÃ­vel</button>
          </div>
        </div>
      </section>

      <!-- Final -->
      <section class="card hidden" id="screenFinal">
        <div class="card-inner center">
          <h2 class="final-title">ğŸ„</h2>

          <p class="final-text" id="finalCongrats"></p>
          <div class="stat-grid" id="finalStatGrid"></div>

          <p class="final-sub" id="finalStats"></p>

          <!-- âœ… precisa ser DIV porque o JS injeta botÃµes e HTML -->
          <div class="final-sub" id="finalRecado"></div>

          <br>
          <div class="epigraph" id="epigraphBox"></div>
          <br>

          <p class="final-sub">Veja as mensagens que vocÃª acabou de corrigir:</p>

          <div class="actions center-actions" style="margin-top:10px">
            <button class="btn" id="toggleFinalMsgs" type="button" aria-expanded="false">Ver mensagens corrigidas</button>
          </div>

          <div id="finalMsgsWrap" class="hidden">
            <div class="final-activity">
              <div class="final-activity-head">
                <strong>Atividade 1 â€” FÃ¡cil</strong>
                <button class="btn mini ghost" id="reviewBtn1" type="button">CorreÃ§Ãµes e justificativas</button>
              </div>
              <div class="final-box" id="finalBox1"></div>
            </div>

            <div class="final-activity">
              <div class="final-activity-head">
                <strong>Atividade 2 â€” MÃ©dio</strong>
                <button class="btn mini ghost" id="reviewBtn2" type="button">CorreÃ§Ãµes e justificativas</button>
              </div>
              <div class="final-box" id="finalBox2"></div>
            </div>

            <div class="final-activity">
              <div class="final-activity-head">
                <strong>Atividade 3 â€” DifÃ­cil</strong>
                <button class="btn mini ghost" id="reviewBtn3" type="button">CorreÃ§Ãµes e justificativas</button>
              </div>
              <div class="final-box" id="finalBox3"></div>
            </div>
          </div>

          <hr>

          <div class="credits">
            <p class="credits-title"><strong>Com carinho:</strong></p>
            <p class="credits-names">
              Aline dos Santos Carneiro<br>
              Amanda Firme<br>
              Anna Catharina Miranda<br>
              Bianca Gribel<br>
              Edrian JosuÃ© Pasini<br>
              Eric Parrot<br>
              Leonardo A.R.T. dos Santos<br>
              Marilac Loraine Oleniki<br>
              Mirela de Oliveira<br>
              Rafael de Oliveira<br>
              Samuel Rezende<br>
              VerÃ´nica M. Guedes<br>
              VitÃ³ria Firmino<br>
              Welder Lancieri Marchini
            </p>
          </div>

          <hr>

          <div class="actions center-actions">
            <button class="btn" id="finalRankingBtn" type="button">Ver ranking</button>
            <button class="btn ghost" id="restartBtn" type="button">RecomeÃ§ar</button>
          </div>
        </div>
      </section>

    </div>
  </main>

  <!-- Modal -->
  <div class="hidden" id="overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <div class="modal-head">
        <h3 id="modalTitle">Mensagem</h3>
        <button class="icon-btn" id="closeModal" aria-label="Fechar" type="button">âœ•</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-foot" id="modalFoot"></div>
    </div>
  </div>

  <!-- Tela do Admin (mantido) -->
  <div id="adminLoginScreen" class="hidden">
    <div class="modal">
      <div class="modal-head">
        <h3 id="modalTitle">Login Admin</h3>
        <button class="icon-btn" id="closeAdminModal" aria-label="Fechar" type="button">âœ•</button>
      </div>
      <div class="modal-body">
        <h4>Entre com a senha para acessar a Ã¡rea de administrador</h4>
        <input type="password" id="adminPasswordInput" placeholder="Digite a senha" class="input" />
      </div>
      <div class="modal-foot">
        <button id="adminLoginBtn" class="btn" type="button">Entrar</button>
      </div>
    </div>
  </div>

  <div id="adminPanel" class="hidden">
    <div class="modal">
      <div class="modal-head">
        <h3 id="adminPanelTitle">Painel do Administrador</h3>
        <button class="icon-btn" id="closeAdminPanel" aria-label="Fechar" type="button">âœ•</button>
      </div>
      <div class="modal-body">
        <h4>Bem-vindo, Administrador!</h4>
        <p>Escolha uma opÃ§Ã£o abaixo:</p>
        <button id="resetRankingBtn" class="btn">Zerar Ranking</button>
      </div>
      <div class="modal-foot">
        <button id="closeAdminPanelBtn" class="btn" type="button">Fechar</button>
      </div>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
