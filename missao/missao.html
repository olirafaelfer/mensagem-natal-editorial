<div class="overlay" id="missionOverlay" role="dialog" aria-modal="true">
  <div class="modal step-1" role="document">
    <div class="modal-header">
      <div class="title">‚ú® Miss√£o Especial de Natal ‚ú®</div>
      <button class="icon-btn" onclick="closeMission()" aria-label="Fechar">‚úñ</button>
    </div>

    <p class="text-block">
      Neste Natal a sua miss√£o especial √© compartilhar o amor, carinho e ajudar na cria√ß√£o de uma rede que realmente faz a diferen√ßa neste mundo.
      Muitas vezes a diferen√ßa que podemos fazer est√° muito mais perto do que imaginamos.
      D√™ um abra√ßo em quem voc√™ ama, doe 1kg de alimento ou ore pela paz e sa√∫de de todos.
      Todas essas atitudes s√£o valios√≠ssimas para mudarmos o mundo.
      O esp√≠rito natalino deve ser de partilha e n√£o de ego√≠smo, por isso personalize esta mensagem e envie para algu√©m que voc√™ ame
      e queira que fa√ßa parte desta corrente.
    </p>

    <button class="primary-btn" onclick="goToCard()">Avan√ßar ‚ûú</button>
  </div>

  <div class="modal step-2 hidden" role="document">
    <div class="modal-header">
      <div class="title">üéÅ Cart√£o Natalino</div>
      <button class="icon-btn" onclick="closeMission()" aria-label="Fechar">‚úñ</button>
    </div>

    <div class="card-preview" id="cardPreview">
      <div class="card-body" id="cardBodyText"></div>
      <div class="card-footer">
        <img class="logo" src="assets/logo-natal.png" alt="Logo" onerror="this.style.display='none'">
      </div>
    </div>

    <div class="row">
      <button class="secondary-btn" onclick="openCustomizer()">‚ú® Personalizar cart√£o</button>
      <button class="ghost-btn" onclick="shareTextOnly()">üì≤ Compartilhar texto</button>
    </div>
  </div>

  <!-- Customizer: bottom-sheet on mobile, split-panel on desktop -->
  <div class="customizer hidden" id="customizer" role="document" aria-label="Personalizar cart√£o">
    <div class="custom-shell">
      <div class="custom-header">
        <div class="title">Personalizar</div>
        <button class="icon-btn" onclick="closeCustomizer()" aria-label="Fechar">‚úñ</button>
      </div>

      <div class="custom-body">
        <div class="stage">
          <div class="stage-top">
            <div class="pill">Pr√©via do cart√£o</div>
            <div class="stage-actions" aria-label="Ajustes do item selecionado">
              <button class="mini-btn" onclick="scaleSelected(0.9)" title="Diminuir">‚ûñ</button>
              <button class="mini-btn" onclick="scaleSelected(1.1)" title="Aumentar">‚ûï</button>
              <button class="mini-btn danger" onclick="removeSelected()" title="Remover">üóë</button>
            </div>
          </div>

          <div class="canvas" id="canvas" aria-label="Cart√£o">
            <div class="sparkle" aria-hidden="true"></div>
            <div class="text-layer" id="textLayer"></div>
            <img class="logo corner" src="assets/logo-natal.png" alt="Logo" onerror="this.style.display='none'">
          </div>

          <div class="hintbar">
            <span class="dot"></span>
            <span><b>Dica:</b> clique/tap em um emoji para adicionar. Depois <b>arraste</b> no cart√£o para mover.</span>
          </div>
        </div>

        <div class="controls">
          <div class="section">
            <div class="section-title">Texto e estilo</div>

            <div class="ctrl-grid">
              <div class="ctrl">
                <label class="label">Fonte</label>
                <select id="fontSelect">
                  <option value="system-ui">Padr√£o</option>
                  <option value="Georgia">Cl√°ssica</option>
                  <option value="'Trebuchet MS'">Moderna</option>
                  <option value="'Courier New'">Carta</option>
                </select>
              </div>

              <div class="ctrl">
                <label class="label">Cor do texto</label>
                <input id="textColor" type="color" value="#ffffff">
              </div>

              <div class="ctrl">
                <label class="label">Tamanho</label>
                <input id="fontSize" type="range" min="12" max="22" value="15">
              </div>

              <div class="ctrl">
                <label class="label">Fundo</label>
                <div class="bg-row">
                  <input id="bg1" type="color" value="#0b1b3a" aria-label="Cor 1">
                  <input id="bg2" type="color" value="#0b0f1a" aria-label="Cor 2">
                </div>
              </div>
            </div>
          </div>

          <div class="section">
            <div class="section-title">Enfeites (emoji)</div>
            <div class="emoji-tray" id="emojiTray"></div>
            <div class="subhint">Arraste do tray (PC) ou toque para adicionar (mobile). Toque no item no cart√£o para selecionar.</div>
          </div>

          <div class="export-row">
            <button class="primary-btn" onclick="exportPNG()">üñº Exportar</button>
            <button class="secondary-btn" onclick="shareImage()">üì≤ Compartilhar</button>
          </div>
        </div>
      </div>

      <!-- Mandatory auto tutorial -->
      <div class="tutorial hidden" id="tutorial">
        <div class="blur"></div>
        <div class="coach">
          <div class="coach-title" id="coachTitle">Vamos personalizar</div>
          <div class="coach-body" id="coachBody"></div>
          <div class="coach-actions">
            <button class="primary-btn" id="coachNext" onclick="nextTutorial()">Pr√≥ximo</button>
          </div>
        </div>
        <div class="spot spot-stage"></div>
        <div class="spot spot-controls"></div>
        <div class="spot spot-tray"></div>
      </div>
    </div>
  </div>
</div>
