<div class="overlay" id="missionOverlay" aria-modal="true" role="dialog">
  <!-- Step 1 -->
  <div class="modal step-1" role="document">
    <div class="modal-header">
      <div class="title">âœ¨ MissÃ£o Especial de Natal âœ¨</div>
      <button class="icon-btn" onclick="closeMission()" aria-label="Fechar">âœ–</button>
    </div>

    <p class="text-block">
      Neste Natal a sua missÃ£o especial Ã© compartilhar o amor, carinho e ajudar na criaÃ§Ã£o de uma rede que realmente faz a diferenÃ§a neste mundo.
      Muitas vezes a diferenÃ§a que podemos fazer estÃ¡ muito mais perto do que imaginamos.
      DÃª um abraÃ§o em quem vocÃª ama, doe 1kg de alimento ou ore pela paz e saÃºde de todos.
      Todas essas atitudes sÃ£o valiosÃ­ssimas para mudarmos o mundo.
      O espÃ­rito natalino deve ser de partilha e nÃ£o de egoÃ­smo, por isso personalize esta mensagem e envie para alguÃ©m que vocÃª ame
      e queira que faÃ§a parte desta corrente.
    </p>

    <button class="primary-btn" onclick="goToCard()">AvanÃ§ar âœ</button>
  </div>

  <!-- Step 2 -->
  <div class="modal step-2 hidden" role="document">
    <div class="modal-header">
      <div class="title">ğŸ CartÃ£o Natalino</div>
      <button class="icon-btn" onclick="closeMission()" aria-label="Fechar">âœ–</button>
    </div>

    <div class="card-preview" id="cardPreview">
      <div class="card-body">
        <p id="baseCardText">
          Obrigado por vocÃª existir na minha vida. Este nÃ£o Ã© sÃ³ um cartÃ£o, mas o inÃ­cio de uma corrente de amor e mudanÃ§a.<br><br>
          Ame quem estÃ¡ ao seu lado, faÃ§a uma doaÃ§Ã£o neste natal, ore por quem precisa e o mais importante, sinta isso no seu coraÃ§Ã£o.<br><br>
          Se cada um de nÃ³s fizermos sÃ³ um pouquinho, transformaremos o mundo ao nosso redor.
        </p>
      </div>
      <div class="card-footer">
        <img class="logo" src="assets/logo-natal.png" alt="Logo" onerror="this.style.display='none'">
      </div>
    </div>

    <button class="secondary-btn" onclick="openCustomizer()">âœ¨ Personalizar mensagem natalina</button>

    <button class="ghost-btn" onclick="shareQuick()">ğŸ“² Compartilhar (rÃ¡pido)</button>
  </div>

  <!-- Customizer Modal -->
  <div class="customizer hidden" id="customizer" role="document">
    <div class="customizer-shell">
      <div class="customizer-header">
        <div class="title">PersonalizaÃ§Ã£o Premium</div>
        <button class="icon-btn" onclick="closeCustomizer()" aria-label="Fechar">âœ–</button>
      </div>

      <div class="snow" aria-hidden="true"></div>

      <div class="customizer-grid">
        <div class="panel">
          <label class="label" for="customText">Mensagem adicional (mÃ¡x. 200)</label>
          <textarea id="customText" maxlength="200" placeholder="Escreva algo especial..."></textarea>
          <div class="counter"><span id="customCount">0</span>/200</div>

          <div class="toolbar">
            <button class="tool-btn" onclick="startTutorial()">ğŸ¯ Tutorial</button>
            <button class="tool-btn" onclick="clearAll()">ğŸ§¹ Limpar</button>
            <button class="tool-btn" onclick="saveDraft()">ğŸ’¾ Salvar</button>
          </div>

          <div class="label" style="margin-top:10px">Itens natalinos (arraste para o cartÃ£o)</div>
          <div class="decorations">
            <img src="assets/rena.png" draggable="true" ondragstart="drag(event)" alt="Rena">
            <img src="assets/papai-noel.png" draggable="true" ondragstart="drag(event)" alt="Papai Noel">
            <img src="assets/panetone.png" draggable="true" ondragstart="drag(event)" alt="Panetone">
          </div>

          <div class="hint">
            Dica: toque em um item no cartÃ£o para <b>mover</b> e usar os botÃµes de <b>tamanho</b>.
          </div>
        </div>

        <div class="stage">
          <div class="stage-header">
            <div class="pill">PrÃ©via do cartÃ£o</div>
            <div class="stage-actions">
              <button class="mini-btn" onclick="sizeSelected(0.9)" title="Diminuir">â–</button>
              <button class="mini-btn" onclick="sizeSelected(1.1)" title="Aumentar">â•</button>
              <button class="mini-btn" onclick="removeSelected()" title="Remover">ğŸ—‘ï¸</button>
            </div>
          </div>

          <div class="canvas-wrap">
            <div class="canvasArea" id="canvasArea" ondrop="drop(event)" ondragover="allowDrop(event)">
              <div class="card-overlay-text">
                <div class="base" id="baseTextOverlay"></div>
                <div class="extra" id="extraTextOverlay"></div>
              </div>
              <img class="logo corner" src="assets/logo-natal.png" alt="Logo" onerror="this.style.display='none'">
            </div>
          </div>

          <div class="export-row">
            <button class="primary-btn" onclick="exportPNG()">ğŸ–¼ï¸ Exportar imagem</button>
            <button class="secondary-btn" onclick="shareExport()">ğŸ“² Compartilhar</button>
          </div>
          <div class="tiny">A exportaÃ§Ã£o gera uma imagem do cartÃ£o (com logo + itens) pronta para enviar.</div>
        </div>
      </div>

      <!-- Tutorial overlay -->
      <div class="tutorial hidden" id="tutorial">
        <div class="blur"></div>

        <div class="coach" id="coach">
          <div class="coach-title">Como personalizar</div>
          <div class="coach-body" id="coachBody"></div>
          <div class="coach-actions">
            <button class="ghost-btn" onclick="skipTutorial()">Pular</button>
            <button class="primary-btn" onclick="nextTutorial()">PrÃ³ximo</button>
          </div>
        </div>

        <div class="arrow a1">â¬…ï¸</div>
        <div class="arrow a2">â¬‡ï¸</div>
      </div>
    </div>
  </div>
</div>
