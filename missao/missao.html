<div class="overlay" id="missionOverlay" role="dialog" aria-modal="true">
  <div class="modal step-1" role="document">
    <div class="modal-header">
      <div class="title">âœ¨ MissÃ£o Especial de Natal âœ¨</div>
      <button class="icon-btn" onclick="closeMission()" aria-label="Fechar">âœ–</button>
    </div>

    <p class="text-block">
      Neste Natal a sua missÃ£o especial Ã© compartilhar o amor, carinho e ajudar na criaÃ§Ã£o de uma rede que realmente faz a diferenÃ§a neste mundo.
      Muitas vezes a diferenÃ§a que podemos fazer estÃ¡ muito mais perto do que imaginamos.
      DÃª um abraÃ§o em quem vocÃª ama, doe 1kg de alimento ou ore pela paz e saÃºde de todos.
      Todas essas atitudes sÃ£o valiosÃ­ssimas para mudarmos o mundo.
      O espÃ­rito natalino deve ser de partilha e nÃ£o de egoÃ­smo, por isso personalize esta mensagem e envie para alguÃ©m que vocÃª ame
      e queira que faÃ§a parte desta corrente.
    </p>

    <button class="primary-btn" onclick="goToCard()">AvanÃ§ar âœ</button>
  </div>

  <div class="modal step-2 hidden" role="document">
    <div class="modal-header">
      <div class="title">ğŸ CartÃ£o Natalino</div>
      <button class="icon-btn" onclick="closeMission()" aria-label="Fechar">âœ–</button>
    </div>

    <div class="card-preview">
      <div class="card-body" id="cardBodyText"></div>
      <div class="card-footer">
        <img class="logo" src="assets/logo-natal.png" alt="Logo" onerror="this.style.display='none'">
      </div>
    </div>

    <button class="secondary-btn" onclick="openCustomizer()">âœ¨ Personalizar cartÃ£o</button>
    <button class="ghost-btn" onclick="shareTextOnly()">ğŸ“² Compartilhar texto</button>
  </div>

  <!-- Personalizador (SEM tutorial / SEM blur) -->
  <div class="sheet hidden" id="customizer" role="document" aria-label="Personalizar cartÃ£o">
    <div class="sheet-handle"></div>

    <div class="sheet-header">
      <div class="title">Personalizar</div>
      <button class="icon-btn" onclick="closeCustomizer()" aria-label="Fechar">âœ–</button>
    </div>

    <div class="sheet-content">
      <div class="stage">
        <div class="canvas" id="canvas" ondrop="dropSvg(event)" ondragover="allowDrop(event)">
          <div class="text-layer" id="textLayer"></div>
          <img class="logo corner" src="assets/logo-natal.png" alt="Logo" onerror="this.style.display='none'">
        </div>

        <div class="stage-actions">
          <button class="mini-btn" onclick="nudgeSelected(0,-6)">â¬†</button>
          <button class="mini-btn" onclick="nudgeSelected(-6,0)">â¬…</button>
          <button class="mini-btn" onclick="nudgeSelected(6,0)">â¡</button>
          <button class="mini-btn" onclick="nudgeSelected(0,6)">â¬‡</button>
          <button class="mini-btn" onclick="scaleSelected(0.9)">â–</button>
          <button class="mini-btn" onclick="scaleSelected(1.1)">â•</button>
          <button class="mini-btn danger" onclick="removeSelected()">ğŸ—‘</button>
        </div>
      </div>

      <div class="controls">
        <div class="ctrl-row">
          <label class="label">Fonte</label>
          <select id="fontSelect">
            <option value="system-ui">PadrÃ£o</option>
            <option value="Georgia">ClÃ¡ssica</option>
            <option value="'Trebuchet MS'">Moderna</option>
            <option value="'Courier New'">Carta</option>
          </select>
        </div>

        <div class="ctrl-row">
          <label class="label">Cor do texto</label>
          <input id="textColor" type="color" value="#ffffff">
        </div>

        <div class="ctrl-row">
          <label class="label">Fundo</label>
          <div class="bg-row">
            <input id="bg1" type="color" value="#14213d">
            <input id="bg2" type="color" value="#0e1625">
          </div>
        </div>

        <div class="ctrl-row">
          <label class="label">Tamanho do texto</label>
          <input id="fontSize" type="range" min="12" max="20" value="14">
        </div>

        <div class="label" style="margin-top:10px">Enfeites (SVG)</div>
        <div class="svgs" id="svgTray"></div>

        <div class="export-row">
          <button class="primary-btn" onclick="exportPNG()">ğŸ–¼ Exportar</button>
          <button class="secondary-btn" onclick="shareImage()">ğŸ“² Compartilhar</button>
        </div>
      </div>
    </div>
  </div>
</div>
