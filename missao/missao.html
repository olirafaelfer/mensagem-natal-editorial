<div class="overlay" id="missionOverlay" role="dialog" aria-modal="true">
  <div class="modal step-1" role="document">
    <div class="modal-header">
      <div class="title">âœ¨ MissÃ£o Especial de Natal âœ¨</div>
      <button class="icon-btn" onclick="closeMission()" aria-label="Fechar">âœ–</button>
    </div>

    <p class="text-block">
      Neste Natal a sua missÃ£o especial Ã© compartilhar o amor, carinho e ajudar na criaÃ§Ã£o de uma rede que realmente faz a diferenÃ§a neste mundo.
      Muitas vezes a diferenÃ§a que podemos fazer estÃ¡ muito mais perto do que imaginamos.
      DÃª um abraÃ§o em quem vocÃª ama, doe 1kg de alimento ou ore pela paz e saÃºde de todos.
      Todas essas atitudes sÃ£o valiosÃ­ssimas para mudarmos o mundo.
      O espÃ­rito natalino deve ser de partilha e nÃ£o de egoÃ­smo, por isso personalize esta mensagem e envie para alguÃ©m que vocÃª ame
      e queira que faÃ§a parte desta corrente.
    </p>

    <button class="primary-btn" onclick="goToCard()">AvanÃ§ar âœ</button>
  </div>

  <div class="modal step-2 hidden" role="document">
    <div class="modal-header">
      <div class="title">ğŸ CartÃ£o Natalino</div>
      <button class="icon-btn" onclick="closeMission()" aria-label="Fechar">âœ–</button>
    </div>

    <div class="card-preview" id="cardPreview">
      <div class="card-body" id="cardBodyText"></div>
      <div class="card-footer">
        <img class="logo" src="assets/logo-natal.png" alt="Logo" onerror="this.style.display='none'">
      </div>
    </div>

    <div class="row">
      <button class="secondary-btn" onclick="openCustomizer()">âœ¨ Personalizar cartÃ£o</button>
      <button class="ghost-btn" onclick="shareTextOnly()">ğŸ“² Compartilhar texto</button>
    </div>
  </div>

  <!-- Customizer -->
  <div class="customizer hidden" id="customizer" role="document" aria-label="Personalizar cartÃ£o">
    <div class="custom-shell">
      <div class="custom-header">
        <div class="title">Personalizar</div>
        <button class="icon-btn" onclick="closeCustomizer()" aria-label="Fechar">âœ–</button>
      </div>

      <div class="custom-body">
        <div class="stage" id="stageBlock">
          <div class="stage-top">
            <div class="pill">PrÃ©via do cartÃ£o</div>
            <div class="stage-actions" aria-label="Ajustes do item selecionado">
              <button class="mini-btn" onclick="scaleSelected(0.9)" title="Diminuir">â–</button>
              <button class="mini-btn" onclick="scaleSelected(1.1)" title="Aumentar">â•</button>
              <button class="mini-btn danger" onclick="removeSelected()" title="Remover">ğŸ—‘</button>
            </div>
          </div>

          <div class="canvas" id="canvas" aria-label="CartÃ£o">
            <div class="sparkle" aria-hidden="true"></div>
            <div class="text-layer" id="textLayer"></div>
            <img class="logo corner" src="assets/logo-natal.png" alt="Logo" onerror="this.style.display='none'">
          </div>

          <div class="hintbar">
            <span class="dot"></span>
            <span><b>Dica:</b> clique/tap em um emoji para adicionar. Depois <b>arraste</b> no cartÃ£o para mover.</span>
          </div>
        </div>

        <div class="controls" id="controlsBlock">
          <div class="section">
            <div class="section-title">Texto e estilo</div>
            <div class="ctrl-grid">
              <div class="ctrl">
                <label class="label">Fonte</label>
                <select id="fontSelect">
                  <option value="system-ui">PadrÃ£o</option>
                  <option value="Georgia">ClÃ¡ssica</option>
                  <option value="'Trebuchet MS'">Moderna</option>
                  <option value="'Courier New'">Carta</option>
                </select>
              </div>
              <div class="ctrl">
                <label class="label">Cor do texto</label>
                <input id="textColor" type="color" value="#ffffff">
              </div>
              <div class="ctrl">
                <label class="label">Tamanho</label>
                <input id="fontSize" type="range" min="12" max="22" value="15">
              </div>
              <div class="ctrl">
                <label class="label">Fundo</label>
                <div class="bg-row">
                  <input id="bg1" type="color" value="#0b1b3a" aria-label="Cor 1">
                  <input id="bg2" type="color" value="#0b0f1a" aria-label="Cor 2">
                </div>
              </div>
            </div>
          </div>

          <div class="section" id="trayBlock">
            <div class="section-title">Enfeites (emoji)</div>
            <div class="emoji-tray" id="emojiTray"></div>
            <div class="subhint">Clique/tap para adicionar. No PC, vocÃª tambÃ©m pode arrastar para o cartÃ£o.</div>
          </div>

          <div class="export-row">
            <button class="primary-btn" onclick="exportPNG()">ğŸ–¼ Exportar</button>
            <button class="secondary-btn" onclick="shareImage()">ğŸ“² Compartilhar</button>
          </div>
        </div>
      </div>

      <!-- Tutorial (no blur) -->
      <div class="tutorial hidden" id="tutorial" aria-live="polite">
        <div class="dim"></div>
        <div class="spot spot-stage" id="spotStage"></div>
        <div class="spot spot-controls" id="spotControls"></div>
        <div class="spot spot-tray" id="spotTray"></div>

        <div class="coach" role="dialog" aria-modal="true" aria-label="Tutorial">
          <div class="coach-title" id="coachTitle"></div>
          <div class="coach-body" id="coachBody"></div>
          <div class="coach-actions">
            <button class="primary-btn" id="coachNext" type="button">PrÃ³ximo</button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
